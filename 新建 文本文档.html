<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å—å¸ˆå¤§ä»™æ—æ ¡åŒºèµèŠ±åœ°å›¾</title>
    <style>
        #container {
            width: 100%;
            height: 100vh;
            margin: 0;
            padding: 0;
        }

        /* ä¼˜åŒ–åçš„èŠ±æœµåŠ¨ç”» */
        .flower {
            position: fixed;
            width: 15px;
            height: 15px;
            background: #FFB6C1;
            border-radius: 50% 50% 0 50%;
            transform: rotate(45deg);
            animation: fall 8s linear infinite;
            box-shadow: 0 0 8px #FF69B4;
            opacity: 0.8;
            pointer-events: none;
        }

        @keyframes fall {
            0% {
                transform: translateY(-10vh) rotate(0deg) scale(0.8);
            }
            100% {
                transform: translateY(110vh) rotate(720deg) scale(1.2);
                opacity: 0;
            }
        }

        /* ç¾åŒ–æ ‡è®°ç‚¹ */
        .amap-marker {
            filter: drop-shadow(0 0 6px #ff69b4);
        }
    </style>
    <script>
        window._AMapSecurityConfig = {
            securityJsCode: "a460c0a4e3150dcff2f2b0204c19688b"
        };
    </script>
    <script src="https://webapi.amap.com/maps?v=2.0&key=cf496a50221d940fd35a016b9ad60e44"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <div id="container"></div>

    <script>
        // åˆå§‹åŒ–é…ç½®
        const CONFIG = {
            center: [118.8375, 32.0785], // å—å¸ˆå¤§ä»™æ—æ ¡åŒºä¸­å¿ƒåæ ‡
            zoom: 17,
            mapStyle: 'amap://styles/c06c02e7b62f72d616028a91c60deeac',
            flowerSpots: [
                {
                    name: "å­¦æ˜æ¥¼æ—æ¨±èŠ±",
                    type: "æ¨±èŠ±",
                    period: "3-4æœˆ",
                    pos: [118.8370, 32.0790],
                    images: [
                        "https://dummyimage.com/300x200/ff0000/ffffff&text=æ¨±èŠ±1",
                        "https://dummyimage.com/300x200/ff1100/ffffff&text=æ¨±èŠ±2"
                    ]
                },
                {
                    name: "æ•¬æ–‡å›¾ä¹¦é¦†å‰ç‰¡ä¸¹",
                    type: "ç‰¡ä¸¹",
                    period: "4-5æœˆ",
                    pos: [118.8380, 32.0792],
                    images: [
                        "https://dummyimage.com/300x200/00ff00/ffffff&text=ç‰¡ä¸¹1",
                        "https://dummyimage.com/300x200/11ff00/ffffff&text=ç‰¡ä¸¹2"
                    ]
                },
                {
                    name: "è¥¿åŒºé£Ÿå ‚é™„è¿‘éƒé‡‘é¦™",
                    type: "éƒé‡‘é¦™",
                    period: "4-5æœˆ",
                    pos: [118.8365, 32.0788],
                    images: [
                        "https://dummyimage.com/300x200/0000ff/ffffff&text=éƒé‡‘é¦™1",
                        "https://dummyimage.com/300x200/0011ff/ffffff&text=éƒé‡‘é¦™2"
                    ]
                }
            ],
            poems: {
                'æ¨±èŠ±': [
                    'å°å›­æ–°ç§çº¢æ¨±æ ‘ï¼Œé—²ç»•èŠ±è¡Œä¾¿å½“æ¸¸ã€‚â€”â€”ç™½å±…æ˜“',
                    'æ¨±èŠ±çƒ‚æ¼«å‡ å¤šæ—¶ï¼ŸæŸ³ç»¿æ¡ƒçº¢ä¸¤æœªçŸ¥ã€‚â€”â€”è‹æ›¼æ®Š'
                ],
                'ç‰¡ä¸¹': [
                    'å”¯æœ‰ç‰¡ä¸¹çœŸå›½è‰²ï¼ŒèŠ±å¼€æ—¶èŠ‚åŠ¨äº¬åŸã€‚â€”â€”åˆ˜ç¦¹é”¡',
                    'äº‘æƒ³è¡£è£³èŠ±æƒ³å®¹ï¼Œæ˜¥é£æ‹‚æ§›éœ²åæµ“ã€‚â€”â€”æç™½'
                ],
                'éƒé‡‘é¦™': [
                    'å…°é™µç¾é…’éƒé‡‘é¦™ï¼Œç‰ç¢—ç››æ¥ç¥ç€å…‰ã€‚â€”â€”æç™½',
                    'éƒé‡‘é¦™æ±—è£›æ­Œå·¾ï¼Œå±±çŸ³æ¦´èŠ±æŸ“èˆè£™ã€‚â€”â€”ç™½å±…æ˜“'
                ]
            }
        };

        // åˆå§‹åŒ–åœ°å›¾
        const map = new AMap.Map('container', {
            center: CONFIG.center,
            zoom: CONFIG.zoom,
            mapStyle: CONFIG.mapStyle,
            viewMode: '2D'
        });

        // åˆ›å»ºé£˜èŠ±åŠ¨ç”»
        function createFlower() {
            const flower = document.createElement('div');
            flower.className = 'flower';
            flower.style.left = Math.random() * 100 + 'vw';
            flower.style.animationDuration = Math.random() * 3 + 5 + 's';
            document.body.appendChild(flower);
            setTimeout(() => flower.remove(), 8000);
        }
        setInterval(createFlower, 500);

        // åˆ›å»ºèŠ±å‰æ ‡è®°
        CONFIG.flowerSpots.forEach(spot => {
            const marker = new AMap.Marker({
                position: spot.pos,
                content: `<div style="font-size:24px">ğŸŒ¸</div>`,
                offset: new AMap.Pixel(-12, -12)
            });

            marker.on('click', () => {
                Swal.fire({
                    title: spot.name,
                    html: `
                        <p>ğŸŒ¸ å“ç§ï¼š${spot.type}</p>
                        <p>ğŸ“… èŠ±æœŸï¼š${spot.period}</p>
                        <hr>
                        <button class="swal2-btn blind-box">å¯»èŠ±ç›²ç›’</button>
                    `,
                    showConfirmButton: false,
                    didOpen: () => {
                        document.querySelector('.blind-box').addEventListener('click', () => {
                            const poemIndex = Math.floor(Math.random() * CONFIG.poems[spot.type].length);
                            const imageIndex = Math.floor(Math.random() * spot.images.length);
                            
                            Swal.fire({
                                title: 'è¯—è¯èŠ±è¯­',
                                html: `
                                    <p>${CONFIG.poems[spot.type][poemIndex]}</p>
                                    <img src="${spot.images[imageIndex]}" 
                                         style="max-width: 280px; margin-top: 10px; border-radius: 8px;">
                                `,
                                confirmButtonText: 'å…³é—­'
                            });
                        });
                    }
                });
            });

            map.add(marker);
        });

        // åˆå§‹åŒ–å¼•å¯¼
        const guides = [
            'æ¬¢è¿ä½¿ç”¨å—å¸ˆå¤§èµèŠ±åœ°å›¾ï¼',
            'ç‚¹å‡»åœ°å›¾ä¸Šçš„èŠ±æœµæ ‡è®°æŸ¥çœ‹èŠ±å‰ä¿¡æ¯',
            'ç‚¹å‡»ã€Œå¯»èŠ±ç›²ç›’ã€å‘ç°è¯—è¯ä¹‹ç¾'
        ];
        
        let currentStep = 0;
        function showGuide() {
            if (currentStep < guides.length) {
                Swal.fire({
                    title: `ä½¿ç”¨æŒ‡å— (${currentStep + 1}/3)`,
                    text: guides[currentStep],
                    confirmButtonText: 'ä¸‹ä¸€æ­¥'
                }).then(() => {
                    currentStep++;
                    showGuide();
                });
            }
        }
        showGuide();
    </script>
</body>

</html>